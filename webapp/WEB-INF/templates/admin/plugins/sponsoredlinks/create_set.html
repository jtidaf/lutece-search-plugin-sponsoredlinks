<script language="javascript" type="text/javascript">
var target_content_id;
function linkservice( content_id, insert_service_id, plugin_name, subcategory ) 
{
	target_content_id=content_id;
	javascript:document.getElementById( content_id ).innerHTML = "&nbsp;";
	var url = "${webapp_url}/jsp/admin/insert/DisplayInsertService.jsp" +
				"?insert_service_type=" + insert_service_id +
				"&plugin_name=" + plugin_name + 
				"&subcategory=" + subcategory +
				"&input=" + content_id + "&selected_text=";
	fen=window.open( url ,"","toolbar=no, scrollbars=yes, status=yes, location=no, " +
							"directories=no, menubar=no, width=550, height=450");
	fen.focus();
}
</script>

<div class="content-box" >
    
    <h2>#i18n{sponsoredlinks.create_set.tableLabel}</h2>
    
    <form method="post"  name="create_set" id="create_set" action="jsp/admin/plugins/sponsoredlinks/DoCreateSet.jsp">
	<div class="sponsoredlinks-form">    
        <p>
            <label for="title" >#i18n{sponsoredlinks.create_set.labelTitle} * : </label> 
            <input type="text" id="title" name="title" size="60" maxlength="50" />
        </p>        
        <p>
            <label for="id_group">#i18n{sponsoredlinks.create_set.labelGroup} * : </label>
            <select name="id_group" >
                <!--<option value =""></option>-->
                <#list group_list as group >
	                <option value="${group.id}">${group.title}</option>
                </#list>
            </select>
        </p>
    </div>
    <div class="highlight-box">
    	<h2>#i18n{sponsoredlinks.create_set.labelLinkList}</h2>
    	<#list link_list as link>       
	        <p>
	            <label for="link_list" style="margin-top: 4px;">${link_index + 1}. ${link.template.description} :</label>
	            <#if link.template.resource?exists>
		            <textarea readOnly id="link_list_${link_index + 1}" name="link_list" rows="2" cols="57">&nbsp;</textarea>
		            <a href="javascript:void(0)" onClick="javascript:linkservice('link_list_${link_index + 1}', '${link.template.resource.id}', '${link.template.resource.pluginName}', '${link.template.subCategory}');">
		            	<img src="images/admin/skin/plugins/sponsoredlinks/action/linkservice.png" alt="#i18n{sponsoredlinks.create_set.actionLink}" title="#i18n{sponsoredlinks.create_set.actionLink}" />
		            </a>
		        </p>
	        	<p>
	        		<label>&nbsp;</label><p id="sponsoredlinks-advice-caption">#i18n{sponsoredlinks.create_set.descriptionContent} : ${link.template.resource.label}
	        		<#-- subcategory (if any) -->
	        		<#if link.template.subCategory?has_content>
	        			<#assign selectionBean = link.template.resource.selectionActionBean />
		        		<#if selectionBean.subCategories?size &gt; 0>
			            	<#list selectionBean.subCategories as subCategory>
			            		<#if link.template.subCategory == subCategory.code>
			            		<#-- insertservice matches and subcategory selected -->
			            		&nbsp;: ${subCategory.name}
			            		</#if>
	            			</#list>
						</#if>
					</#if>
	        	</p>
	        	<#else>
		        	<textarea disabled id="link_list_${link_index + 1}" name="link_list"  rows="2" cols="57">&nbsp;</textarea>
		        </p>
	        	<p>
	        		<label>&nbsp;</label><p id="sponsoredlinks-warning-caption">#i18n{sponsoredlinks.create_set.resourceNotAvailable}</p>
		        </#if>
	        </p>
    	</#list>
	 	<p id="sponsoredlinks-advice">#i18n{sponsoredlinks.create_set.linkAdvice}</p> 
	</div>  	
        <p>   
            <input type="submit" value="#i18n{sponsoredlinks.create_set.buttonValidate}" name="submit" class="button" />
            <input type="submit" value="#i18n{sponsoredlinks.create_set.buttonCancel}" name="cancel" class="button" />
        </p>
        
    </form>
    
</div>